{% extends 'base.html' %}

{% block content %}
<h1 class="mx-auto text-center">Booking Management Area</h1>
<div class="container-fluid">
    <div class="table-responsive col-md-8 col-12">
           <!-- Display message if no bookings -->
            {% if not bookings %}
            <h2 class="fw-bold mx-auto text-center ">There are no bookings.</h2>
            {% else %}
            <!-- pending bookings -->
        <h2 class="my-bookings m-2">Pending Bookings</h2>
        <p class="scroll-note text-center">Scroll right for entire pending Booking details <i class="fas fa-arrow-right"></i></p>
         <!-- Check if there are pending bookings -->
        {% if not pendings %}
        <p class="fw-bold m-2">There are no pending bookings.</p>
        {% else %}
         <!-- display pending bookings -->
        <table class="table">
            <thead>
                <tr class="table-primary">
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">People</th>
                    <th scope="col">status</th>
                    <th scope="col">Approve</th>
                    <th scope="col">Reject</th>
                </tr>
            </thead>
            <tbody>
              <!-- Loop through pending bookings -->

                {% for pending in pendings %}
                <tr class="table-danger">
                    <td>{{pending.first_name}}</td>
                    <td>{{pending.last_name}}</td>
                    <td>{{pending.date}}</td>
                    <td>{{pending.time}}</td>
                    <td>{{pending.num_of_people}}</td>
                    <td>{{pending.status}}</td>
                    <!-- <td><a href="{% url 'dashboard'  %}" class="table-btn btn-warning p-2 text-decoration-none rounded-2">Approve</a></td>
                    <td><a href="{% url 'dashboard' %}" class="table-btn btn-danger p-2 text-decoration-none rounded-2">Reject</a></td> -->
                    <td>
                        <form method="post" action="{% url 'approve' pk=pending.id %}">
                            {% csrf_token %}
                            <button type="submit" class="rounded">Approve</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
              <!-- end of loop  -->
            </tbody>
        </table>
        {% endif %}
        <!-- Approved bookings -->
        <h2 class="my-bookings m-2">Approved Bookings</h2>
        <p class="scroll-note text-center">Scroll right for entire approved Booking details <i class="fas fa-arrow-right"></i></p>
        {% if not approved %}
        <p class="fw-bold m-2">There are no approved bookings.</p>
        {% else %}
        <table class="table">
            <thead>
                <tr class="table-primary">
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">People</th>
                    <th scope="col">Approve</th>
                    <th scope="col">Reject</th>
                </tr>
            </thead>
            <tbody>
                {% for approve in approved %}
                <tr class="table-danger">
                    <td>{{approve.first_name}}</td>
                    <td>{{approve.last_name}}</td>
                    <td>{{approve.date}}</td>
                    <td>{{approve.time}}</td>
                    <td>{{approve.num_of_people}}</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
        <!-- Rejected bookings -->
        <h2 class="my-bookings m-2">Rejected Bookings</h2>
        <p class="scroll-note text-center">Scroll right for entire rejected Booking details <i class="fas fa-arrow-right"></i></p>
        {% if not rejected %}
        <p class="fw-bold m-2">There are no rejected bookings.</p>
        {% else %}
        <table class="table">
            <thead>
                <tr class="table-primary">
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">People</th>
                    <th scope="col">Approve</th>
                    <th scope="col">Reject</th>
                </tr>
            </thead>
            <tbody>
                {% for reject in rejected %}
                <tr class="table-danger">
                    <td>{{reject.first_name}}</td>
                    <td>{{reject.last_name}}</td>
                    <td>{{reject.date}}</td>
                    <td>{{reject.time}}</td>
                    <td>{{reject.num_of_people}}</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock content %}